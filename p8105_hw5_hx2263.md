p8105\_hw5\_hx2263
================
Tiffany Xi
11/3/2018

Problem 1
=========

Create a dataframe containing all file names

``` r
file_names = tibble(
  id = list.files(path = "./data")
) 
```

Iterate over file names and read in data for each subject using purrr::map and saving the result as a new variable in the dataframe

``` r
study_data = 
  file_names %>% 
    mutate(data = map(.x = id, ~read_csv(str_c("./data/", .x)))) 
```

Tidy the result; manipulate file names to include control arm and subject ID, make sure weekly observations are “tidy”, and do any other tidying that’s necessary

``` r
study_data_tidy = 
  study_data %>% 
  unnest() %>% 
  separate(id, into = c("arm_type", "s_id"), sep = "_") %>%
  separate(s_id, into = c("subject_id", "c")) %>% 
  gather(key = "week", value = "obs_value", week_1:week_8) %>% 
  separate(week, into = c("nn", "week"), sep = "_") %>% 
  select(-c, -nn) %>% 
  mutate(week = as.numeric(week))
study_data_tidy
```

    ## # A tibble: 160 x 4
    ##    arm_type subject_id  week obs_value
    ##    <chr>    <chr>      <dbl>     <dbl>
    ##  1 con      01             1      0.2 
    ##  2 con      02             1      1.13
    ##  3 con      03             1      1.77
    ##  4 con      04             1      1.04
    ##  5 con      05             1      0.47
    ##  6 con      06             1      2.37
    ##  7 con      07             1      0.03
    ##  8 con      08             1     -0.08
    ##  9 con      09             1      0.08
    ## 10 con      10             1      2.14
    ## # ... with 150 more rows
